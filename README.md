# Patterns Trend algo

Линия баланса Билла Вильямса.  
При откате по тренду находится второй максимум/минимум.  

## Description

1. Определяем тренд по двум скользящим.
2. Проверяем позицию.
   - Если позиция есть:
     - Выставляется стоп заявка. (улучшается при изменении условий)
     - Take Profit фиксированный. (is_target = True)

   - Если позиции нет.
     - Проверяем паттерны на открытие позиции.

После срабатывания заявки ставится Stop loss и Take Profit, исполнение одной заявки отменит другую. (ОСО)  
Take Profit фиксированный. (?от атр)  
Stop loss по Slow или по минимуму за заданное количество баров. (улучшается)

### Patterns

Линия баланса Билла Вильямса.  
При откате по тренду находится заданный максимум/минимум.

## Stack

Python 3.10
BackTraderQuik
QuikPy

## Utils

Pytest 6.2.5
flake8
environs
loguru
pytz

## Подготовка к запуску

### Установить внешние библиотеки и коннекторы

[**QuikPy**](https://github.com/Naavlad/QuikPy.git)

1. Скопируйте файлы проекта в папку с торговой системой

2. Установка коннектора:

- Скопируйте папку `QUIK\lua` в папку установки QUIK. В ней находятся скрипты LUA.
- Скопируйте папку `QUIK\socket` в папку установки QUIK.
- Запустите QUIK. Из меню Сервисы выберите Lua скрипты. Нажмите кнопку Добавить. Выберете скрипт `QuikSharp.lua` Нажмите
  кнопку OK. Выделите скрипт из списка. Нажмите кнопку Запустить.

Скрипт должен запуститься без ошибок, в окне сообщений QUIK выдать `QUIK# is waiting for client connection...`

[**BackTraderQuik**](https://github.com/Naavlad/BackTraderQuik.git)

- Скопируйте файлы проекта в папку с торговой системой

### Создать и активировать виртуальное окружение, установить зависимости

```bash
python -m venv venv
source venv/Scripts/activate # bash VSCode
pip install -r requirements.txt
```

### Переименовать файл .env.dev в .env и указать в нем недостающую информацию

```bash
SERVER=
CLIENTCODE=
FIRMID=
TRADEACCOUNTID=

HOST=
```
